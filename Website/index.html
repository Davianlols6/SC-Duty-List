<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script type="text/javascript" async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-172906175-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-172906175-1');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QTSS Student Council Duty List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="https://www.davianeng.com/jquery.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>

<meta name="keywords" content="SC Duty List, Student Council Duty List, QTSS Student Council Duty List, QTSS SC Duty List">
<meta name="robots" content="index, follow">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta name="revisit-after" content="1 days">

<!-- Primary Meta Tags -->
<title>QTSS Student Council Duty List</title>
<meta name="title" content="QTSS Student Council Duty List">
<meta name="description" content="Use this site to check what duties you have to do. This website was created and supported by the QTSS Third Student Council EXCO.">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.davianeng.com/sc_duty_list/">
<meta property="og:title" content="QTSS Student Council Duty List">
<meta property="og:description" content="Use this site to check what duties you have to do. This website was created and supported by the QTSS Third Student Council EXCO.">
<meta property="og:image" content="">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://www.davianeng.com/sc_duty_list/">
<meta property="twitter:title" content="QTSS Student Council Duty List">
<meta property="twitter:description" content="Use this site to check what duties you have to do. This website was created and supported by the QTSS Third Student Council EXCO.">
<meta property="twitter:image" content="">

<link rel="apple-touch-icon" sizes="180x180" href="https://www.davianeng.com/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.davianeng.com/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.davianeng.com/favicon/favicon-16x16.png">
<link rel="manifest" href="manifest.webmanifest">
<!-- <link rel="icon" href="https://www.davianeng.com/favicon/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="http://sstatic.net/stackoverflow/img/favicon.ico">
<link rel="manifest" href="manifest.webmanifest"> -->

<script>
    var base_url = ["https://www.davianeng.com/sc_duty_list", "http://127.0.0.1:5500"][0]
</script>
</head>

<body>
    <div class="container-fluid mt-3">
        <div class="text-center">
            <div id="alert" class="alert alert-warning alert-dismissible fade show text-start" role="alert">
                You can change "Overview" to your own name for a more personalised view. You can also select the date to
                check the duty list for that specific date.<br><br>If you change to personalised view mode, the website will remember it and will always show you the personalised view. To set it back, just select "Overview"<br><small class="fw-bold">Click the X button to close and to never
                    see this message again</small>
                <button type="button" onclick="no_alert(1)" class="btn-close" data-bs-dismiss="alert"
                    aria-label="Close"></button>
            </div>
            <script>
                $("#alert").hide();
                var alerted = localStorage.getItem('alert_level') || '';
                if (alerted != 1) {
                    $("#alert").show();
                }
                function no_alert(level) {
                    localStorage.setItem('alert_level', level);
                }
            </script>

            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
                </symbol>
                <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
                </symbol>
            </svg>

            <div class="alert alert-primary d-flex align-items-center alert-dismissible fade show" role="alert">
                <div>
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
                    <use xlink:href="#info-fill" />
                </svg>
                <p>The table below will be the duty list from 25 Oct 2021 to 29 Oct 2021</p>
                <img src="https://api.davianeng.com/static/dutylist.JPG" class="img-fluid">
                <p>The table below will be the flag rasing duty from 25 Oct 2021 to 29 Oct 2021</p>
                 <img src="https://api.davianeng.com/static/dutylist2.JPG" class="img-fluid">
            </div>
                <div>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </div>

            <div class="alert alert-primary d-flex align-items-center alert-dismissible fade show" role="alert">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
                    <use xlink:href="#info-fill" />
                </svg>
                <div>
                    <span id="updated"></span>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </div>

            <div class="row align-items-center">
                <div class="col">
                    <input type="date" id="start" onchange="update()" name="date">
                </div>
                <div class="col">
                    <select class="form-select form-select-sm" id="name" aria-label="Default select example"
                        onchange="name_checker()">
                        <option id="name_og" selected>Overview</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="mt-5">
            <h5 id="date" class="text-center"></h5>

            <div id="personalised"></div>
        </div>


        <div id="overview">
            <div id="recess_duty_block">
                <h4 id="recess_duty_text" class="container shadow pt-3 pb-3 bg-white rounded-pill text-center">Recess
                    Duty</h4>
                <div id="first_recess" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3">
                    <span class="badge bg-primary mb-3">First Recess (9:10 - 9:45)</span>
                    <p><span class="fw-bold">NB1</span><br><span id="first_nb1"></span></p>
                    <p><span class="fw-bold">NB2</span><br><span id="first_nb2"></span></p>
                    <p><span class="fw-bold">NB3</span><br><span id="first_nb3"></span></p>
                    <p><span class="fw-bold">Stall</span><br><span id="first_stall"></span></p>
                    <p><span class="fw-bold">Pond</span><br><span id="first_pond"></span></p>
                    <p><span class="fw-bold">Lift</span><br><span id="first_lift"></span></p>
                    <p><span class="fw-bold">Central</span><br><span id="first_central"></span></p>
                    <p><span class="fw-bold">On Break</span><br><span id="first_on_break"></span></p>
                </div>
                <div id="second_recess" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3">
                    <span class="badge bg-secondary mb-3">Second Recess (9:45 - 10:20)</span>
                    <p><span class="fw-bold">NB1</span><br><span id="second_nb1"></span></p>
                    <p><span class="fw-bold">NB2</span><br><span id="second_nb2"></span></p>
                    <p><span class="fw-bold">NB3</span><br><span id="second_nb3"></span></p>
                    <p><span class="fw-bold">Stall</span><br><span id="second_stall"></span></p>
                    <p><span class="fw-bold">Pond</span><br><span id="second_pond"></span></p>
                    <p><span class="fw-bold">Lift</span><br><span id="second_lift"></span></p>
                    <p><span class="fw-bold">Central</span><br><span id="second_central"></span></p>
                    <p><span class="fw-bold">On Break</span><br><span id="second_on_break"></span></p>
                </div>
                <div id="third_recess" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3">
                    <span class="badge bg-success mb-3">Third Recess (10:20 - 10:55)</span>
                    <p><span class="fw-bold">NB1</span><br><span id="third_nb1"></span></p>
                    <p><span class="fw-bold">NB2</span><br><span id="third_nb2"></span></p>
                    <p><span class="fw-bold">NB3</span><br><span id="third_nb3"></span></p>
                    <p><span class="fw-bold">Stall</span><br><span id="third_stall"></span></p>
                    <p><span class="fw-bold">Pond</span><br><span id="third_pond"></span></p>
                    <p><span class="fw-bold">Lift</span><br><span id="third_lift"></span></p>
                    <p><span class="fw-bold">Central</span><br><span id="third_central"></span></p>
                    <p><span class="fw-bold">On Break</span><br><span id="third_on_break"></span></p>
                </div>
                <div id="fourth_recess" class="container shadow pt-3 pb-3 mb-5 bg-white rounded-3">
                    <span class="badge bg-info mb-3">Fourth Recess (10:55 - 11:30)</span>
                    <p><span class="fw-bold">NB1</span><br><span id="fourth_nb1"></span></p>
                    <p><span class="fw-bold">NB2</span><br><span id="fourth_nb2"></span></p>
                    <p><span class="fw-bold">NB3</span><br><span id="fourth_nb3"></span></p>
                    <p><span class="fw-bold">Stall</span><br><span id="fourth_stall"></span></p>
                    <p><span class="fw-bold">Pond</span><br><span id="fourth_pond"></span></p>
                    <p><span class="fw-bold">Lift</span><br><span id="fourth_lift"></span></p>
                    <p><span class="fw-bold">Central</span><br><span id="fourth_central"></span></p>
                    <p><span class="fw-bold">On Break</span><br><span id="fourth_on_break"></span>
                </div>
            </div>
            <div id="morning_duty_block">
                <h4 id="morning_duty_text" class="container shadow pt-3 pb-3 bg-white rounded-pill text-center">Morning
                    Duty</h4>
                <div class="container shadow pt-3 pb-3 mb-5 bg-white rounded-3">
                    <p><span class="fw-bold">Flag Raising</span><br><span>Singapore Flag: </span><span
                            id="morning_flag_singapore"></span><br><span>School Flag: </span><span
                            id="morning_flag_school"></span></p>
                    <p><span class="fw-bold">Main Gate</span><br><span id="morning_main_gate"></span></p>
                    <p><span class="fw-bold">Late Coming</span><br><span id="morning_late_coming"></span></p>
                    <p><span class="fw-bold">Canteen</span><br><span id="morning_canteen"></span></p>
                    <p><span class="fw-bold">Stairs To Hall</span><br><span id="morning_stairs_to_hall"></span></p>
                    <p><span class="fw-bold">Side Gate</span><br><span id="morning_side_gate"></span></p>
                    <p><span class="fw-bold">Lift</span><br><span id="morning_lift"></span></p>
                    <p><span class="fw-bold">Morning Patrol</span><br><span id="morning_morning_patrol"></span></p>
                    <p><span class="fw-bold">Hall</span><br><span id="morning_hall"></span></p>
                </div>
            </div>
        </div>
    </div>
    <h4 id="weekend" class="container shadow pt-3 pb-3 bg-white rounded-pill text-center">No data is available for this
        day</h4>
    </div>

    <script>

        function show_personalised() {
            $("#updated").text(jsonData["updated"]);
            $("#date2").remove();

            $("#personalised").empty();

            var day = new Date(String($("#start").val()));
            days_of_week(day);
            var week;

            function days_of_week(day) {
                $(Object.keys(jsonData["weeks"])).each(function (i, v) {

                    $(jsonData["weeks"][v]).each(function (b, value) {
                        var a = new Date(value);

                        if (String(day) == String(a)) {
                            week = jsonData["weeks"][v]
                        };

                    });

                });
            }

            var per_dict = {
                0: {
                    "id": "day_1",
                    "h4": "Monday",
                },
                1: {
                    "id": "day_2",
                    "h4": "Tuesday",
                },
                2: {
                    "id": "day_3",
                    "h4": "Wednesday",
                },
                3: {
                    "id": "day_4",
                    "h4": "Thursday",
                },
                4: {
                    "id": "day_5",
                    "h4": "Friday"
                }
            }

            var recess_badge = {
                1: '<span class="badge bg-primary mb-1">First Recess (9:10 - 9:45)</span>',
                2: '<span class="badge bg-secondary mb-1">Second Recess (9:45 - 10:20)</span>',
                3: '<span class="badge bg-success mb-1">Third Recess (10:20 - 10:55)</span>',
                4: '<span class="badge bg-info mb-1">Fourth Recess (10:55 - 11:30)</span>'
            }

            var duty_trans = {
                "nb1": "NB1",
                "nb2": "NB2",
                "nb3": "NB3",
                "stall": "Stall",
                "pond": "Pond",
                "field": "Field",
                "parade_square": "Parade Square",
                "lift": "Lift",
                "central": "Central",
                "patrol": "Patrol",
                "on_break": "On Break",
                "main_gate": "Main Gate",
                "late_coming": "Late Coming",
                "canteen": "Canteen",
                "stairs_to_hall": "Stairs To Hall",
                "side_gate": "Side Gate",
                "morning_patrol": "Morning Patrol",
                "hall": "Hall"
            }

            var counter = 0;
            var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

            $(week).each(function (i, v) {
                if (counter < 5) {
                var dd = new Date(v);
                var first_date = new Date(Object.keys(jsonData["dates"])[0])
                var last_date = new Date(Object.keys(jsonData["dates"])[Object.keys(jsonData["dates"]).length - 1]);
                
                var flagDuty = "";

                if (flagData[v] != null) {

                    if (String($("#name").val()) == flagData[v]["singapore_flag"]) {
                        flagDuty = '<p><span class="fw-bold"></span><span class="badge bg-warning mb-1">Flag Duty</span><br><span class="fw-bold">Duty: </span><span id="">Singapore Flag</span></p>';
                    } else if (String($("#name").val()) == flagData[v]["school_flag"]) {
                        flagDuty = '<p><span class="fw-bold"></span><span class="badge bg-warning mb-1">Flag Duty</span><br><span class="fw-bold">Duty: </span><span id="">School Flag</span></p>';
                    };

                };
                if (dd.getDay() == 6 || dd.getDay() == 0 || jsonData["dates"][v] == 11 || dd < first_date || dd > last_date) {
                    var b = new Date(v);
                    var a = '<div id="' + per_dict[i]["id"] + '" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3"><h4>' + days[b.getDay()] + ", " + String(b.getDate()) + " " + months[b.getMonth()] + '</h4><p><span class="fw-bold"></span>No data is available for this day</span></p></div>'
                    $(a).appendTo("#personalised");
                } else {
                    $("#weekend").hide();
                    var b = new Date(v);
                    var a = '<div id="' + per_dict[i]["id"] + '" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3"><h4>' + days[b.getDay()] + ", " + String(b.getDate()) + " " + months[b.getMonth()] + '</h4>' + flagDuty + '<p><span class="fw-bold"></span>' + recess_badge[nameData[String($("#name").val())][String(jsonData["dates"][v])]["recess"]] + '<br><span class="fw-bold">Duty: </span><span id="">' + duty_trans[nameData[String($("#name").val())][String(jsonData["dates"][v])]["duty"]] + '</span></p></div>'
                    var c = '<div id="' + per_dict[i]["id"] + '" class="container shadow pt-3 pb-3 mb-3 bg-white rounded-3"><h4>' + days[b.getDay()] + ", " + String(b.getDate()) + " " + months[b.getMonth()] + '</h4>' + flagDuty + '<p><span class="fw-bold"></span><span class="badge bg-warning mb-1">Morning Duty</span><br><span class="fw-bold">Duty: </span><span id="">' + duty_trans[nameData[String($("#name").val())]["morning_duty"]["duty"]] + '</span></p><p><span class="fw-bold"></span>' + recess_badge[nameData[String($("#name").val())][String(jsonData["dates"][v])]["recess"]] + '<br><span class="fw-bold">Duty: </span><span id="">' + duty_trans[nameData[String($("#name").val())][String(jsonData["dates"][v])]["duty"]] + '</span></p></div>'                    

                    if (nameData[String($("#name").val())]["morning_duty_check"]) {
                        $(c).appendTo("#personalised");
                    } else {
                        $(a).appendTo("#personalised");
                    }

                }
            }
                counter += 1
            })

            localStorage.setItem("name", String($("#name").val()));
            $("<div id='date2' class='text-center'><h4>Hello " + String($("#name").val()) + "!</h4><p>Here is your duty for the week you selected</p></div>").insertBefore("#date");
            $("#personalised").show();
                $(["#date", "#date2", "#day_1", "#day_2", "#day_3", "#day_4", "#day_5"]).each(function (i,v) {$(v).hide()});
                var eT = 0;
            $.each(["#date2", "#day_1", "#day_2", "#day_3", "#day_4", "#day_5"], function (i, v) {
                $(v).delay(eT).fadeIn('slow');
                eT += 200;
            });

        };

        function name_checker() {
            if ($("#name").val() == "Overview") {
                localStorage.setItem("name", String($("#name").val()));
                $("#personalised").hide();
                $("#date2").remove();

                
                $.each(["#weekend", "#recess_duty_text", "#first_recess", "#second_recess", "#third_recess", "#fourth_recess", "#morning_duty_text", "#morning_duty_block"], function (i, v) {
                    $(v).hide();
                });
                $("#overview").show();
                $("#start").attr("onchange", "update()")
                update();
            } else {
                $("#overview").hide();
                $("#start").attr("onchange", "show_personalised()")
                show_personalised();
            }
        };

    </script>

    <script>
        $.each(["#weekend", "#date", "overview"], function (i, v) {
            $(v).hide();
        });

        var jsonData;
        var flagData;
        var nameData;

        $.getJSON("Data/data.json?time=" + new Date().getTime(),
            function (data, textStatus, jqXHR) {
                var dt = new Date();
                const monthFixer = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];

                date = String(dt.getFullYear()) + "-" + String(monthFixer[dt.getMonth()]) + "-" + String(dt.getDate());
                $("#start").attr("min", Object.keys(data["dates"])[0]);
                $("#start").attr("max", Object.keys(data["dates"])[Object.keys(data["dates"]).length - 1]);

                function formatDate(date) {
                var d = new Date(date),
                    month = '' + (d.getMonth() + 1),
                    day = '' + d.getDate(),
                    year = d.getFullYear();

                if (month.length < 2) 
                    month = '0' + month;
                if (day.length < 2) 
                    day = '0' + day;

                return [year, month, day].join('-');
                }
                $("#start").val(formatDate(dt));

                jsonData = data;
                getFlagsData();

            }
        );

        function getFlagsData() {

            $.getJSON("Data/flag.json?time=" + new Date().getTime(),
                function (data, textStatus, jqXHR) {
                    flagData = data;
                    getNameData();
                }
            );
        }

        function getNameData() {

            $.getJSON("Data/names.json?time=" + new Date().getTime(),
                function (data, textStatus, jqXHR) {
                    nameData = data;

                    $.each(Object.keys(nameData), function (i, v) {
                        
                    if (localStorage.getItem("name") != null && localStorage.getItem("name") == v) {
                        $('option:selected', name_og).remove();
                        var a = '<option selected value="' + String(v) + '">' + String(v) + '</option>'
                        $(a).appendTo("#name");
                    } else {
                        var a = '<option value="' + String(v) + '">' + String(v) + '</option>'
                        $(a).appendTo("#name");
                    }
                        
                    });

                    name_checker();
                }
            );
        }

        var blink = false;

        function recess_time(period) {
            var icon = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-record-circle mx-1 icon-blink" style="fill: #ff0000" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" /><path d="M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" /></svg>'

            function blink_text() {
                blink = true
                $('.icon-blink').each(function () {
                    var elem = $(this);
                    setInterval(function () {
                        if (elem.css('visibility') == 'hidden') {
                            elem.css('visibility', 'visible');
                        } else {
                            elem.css('visibility', 'hidden');
                        }
                    }, 700);
                });
            }

            if (period == 1) {
                $(icon).prependTo("#first_recess");
            } else if (period == 2) {
                $(icon).prependTo("#second_recess");
                $("#first_recess").insertAfter("#fourth_recess");
            } else if (period == 3) {
                $(icon).prependTo("#third_recess");
                $("#first_recess").insertAfter("#fourth_recess");
                $("#second_recess").insertAfter("#first_recess");
            } else if (period == 4) {
                $(icon).prependTo("#fourth_recess");
                $("#first_recess").insertAfter("#fourth_recess");
                $("#second_recess").insertAfter("#first_recess");
                $("#third_recess").insertAfter("#second_recess");
            }

            blink_text();
        }

        function update() {
            $("#updated").text(jsonData["updated"]);

            $("#weekend").hide();
            var dd = new Date(String($("#start").val()));
            var first_date = new Date(Object.keys(jsonData["dates"])[0])
            var last_date = new Date(Object.keys(jsonData["dates"])[Object.keys(jsonData["dates"]).length - 1]);
            if (dd.getDay() == 6 || dd.getDay() == 0 || jsonData["dates"][String($("#start").val())] == 11 || dd < first_date || dd > last_date) {
                $("#date").hide();
                $.each(["#weekend", "#recess_duty_text", "#first_recess", "#second_recess", "#third_recess", "#fourth_recess", "#morning_duty_text", "#morning_duty_block"], function (i, v) {
                    $(v).hide();
                });
                update_date();
                $("#date").fadeIn('slow');
                $("#weekend").delay(500).fadeIn('slow');
                return
            }

            $.each(["#date", "#recess_duty_text", "#first_recess", "#second_recess", "#third_recess", "#fourth_recess", "#morning_duty_text", "#morning_duty_block"], function (i, v) {
                $(v).hide();
            });

            function today(date) {
                var inputDate = new Date(date);
                var todaysDate = new Date();
                if (inputDate.setHours(0, 0, 0, 0) == todaysDate.setHours(0, 0, 0, 0)) {
                    return true
                } else {
                    return false
                }
            }

            function update_block_arrangement() {
                var startTime = '06:00:00';
                var endTime = '08:00:00';

                currentDate = new Date();

                startDate = new Date(currentDate.getTime());
                startDate.setHours(startTime.split(":")[0]);
                startDate.setMinutes(startTime.split(":")[1]);
                startDate.setSeconds(startTime.split(":")[2]);

                endDate = new Date(currentDate.getTime());
                endDate.setHours(endTime.split(":")[0]);
                endDate.setMinutes(endTime.split(":")[1]);
                endDate.setSeconds(endTime.split(":")[2]);


                valid = startDate < currentDate && endDate > currentDate
                if (valid && today(String($("#start").val()))) {
                    $("#recess_duty_block").insertAfter("#morning_duty_block");
                } else {
                    $("#recess_duty_block").insertBefore("#morning_duty_block");
                }

            };

            function list_to_string(list) {
                if (list == "") {
                    return "-"
                } else {
                    return list.join(", ");
                }
            }

            function update_morning_duty() {
                morning_duty_data = jsonData["constants"][jsonData["presets"][jsonData["dates"][String($("#start").val())]]["constant_morning_duty"]];
                $("#morning_main_gate").text(list_to_string(morning_duty_data["main_gate"]));
                $("#morning_late_coming").text(list_to_string(morning_duty_data["late_coming"]));
                $("#morning_canteen").text(list_to_string(morning_duty_data["canteen"]));
                $("#morning_stairs_to_hall").text(list_to_string(morning_duty_data["stairs_to_hall"]));
                $("#morning_side_gate").text(list_to_string(morning_duty_data["side_gate"]));
                $("#morning_lift").text(list_to_string(morning_duty_data["lift"]));
                $("#morning_morning_patrol").text(list_to_string(morning_duty_data["morning_patrol"]));
                $("#morning_hall").text(list_to_string(morning_duty_data["hall"]));

            }
            function update_flag_duty() {
                data = flagData[String($("#start").val())]

                if (data == null) {
                    $("#morning_flag_singapore").text("Data is unavailable");
                    $("#morning_flag_school").text("Data is unavailable");
                } else {
                    $("#morning_flag_singapore").text(data["singapore_flag"]);
                    $("#morning_flag_school").text(data["school_flag"]);
                }
            }

            function update_date() {
                var dtt = new Date(String($("#start").val()));
                var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                $("#date").text("Duty list for " + days[dtt.getDay()] + ", " + String(dtt.getDate()) + " " + months[dtt.getMonth()] + " " + String(dtt.getFullYear()));
            }

            function update_recess_duty() {

                function first_recess() {
                    data = jsonData["presets"][jsonData["dates"][String($("#start").val())]]["recess_duty"]["first_recess"]
                    $("#first_nb1").text(list_to_string(data["nb1"]));
                    $("#first_nb2").text(list_to_string(data["nb2"]));
                    $("#first_nb3").text(list_to_string(data["nb3"]));
                    $("#first_stall").text(list_to_string(data["stall"]));
                    $("#first_pond").text(list_to_string(data["pond"]));
                    $("#first_lift").text(list_to_string(data["lift"]));
                    $("#first_central").text(list_to_string(data["central"]));
                    $("#first_on_break").text(list_to_string(data["on_break"]));
                };

                function second_recess() {
                    data = jsonData["presets"][jsonData["dates"][String($("#start").val())]]["recess_duty"]["second_recess"]
                    $("#second_nb1").text(list_to_string(data["nb1"]));
                    $("#second_nb2").text(list_to_string(data["nb2"]));
                    $("#second_nb3").text(list_to_string(data["nb3"]));
                    $("#second_stall").text(list_to_string(data["stall"]));
                    $("#second_pond").text(list_to_string(data["pond"]));
                    $("#second_lift").text(list_to_string(data["lift"]));
                    $("#second_central").text(list_to_string(data["central"]));
                    $("#second_on_break").text(list_to_string(data["on_break"]));
                };

                function third_recess() {
                    data = jsonData["presets"][jsonData["dates"][String($("#start").val())]]["recess_duty"]["third_recess"]
                    $("#third_nb1").text(list_to_string(data["nb1"]));
                    $("#third_nb2").text(list_to_string(data["nb2"]));
                    $("#third_nb3").text(list_to_string(data["nb3"]));
                    $("#third_stall").text(list_to_string(data["stall"]));
                    $("#third_pond").text(list_to_string(data["pond"]));
                    $("#third_lift").text(list_to_string(data["lift"]));
                    $("#third_central").text(list_to_string(data["central"]));
                    $("#third_on_break").text(list_to_string(data["on_break"]));
                };

                function fourth_recess() {
                    data = jsonData["presets"][jsonData["dates"][String($("#start").val())]]["recess_duty"]["fourth_recess"]
                    $("#fourth_nb1").text(list_to_string(data["nb1"]));
                    $("#fourth_nb2").text(list_to_string(data["nb2"]));
                    $("#fourth_nb3").text(list_to_string(data["nb3"]));
                    $("#fourth_stall").text(list_to_string(data["stall"]));
                    $("#fourth_pond").text(list_to_string(data["pond"]));
                    $("#fourth_lift").text(list_to_string(data["lift"]));
                    $("#fourth_central").text(list_to_string(data["central"]));
                    $("#fourth_on_break").text(list_to_string(data["on_break"]));
                };

                first_recess();
                second_recess();
                third_recess();
                fourth_recess();
            }

            function check_time_valid(start, end) {
                var startTime = String(start);
                var endTime = String(end);

                currentDate = new Date();

                startDate = new Date(currentDate.getTime());
                startDate.setHours(startTime.split(":")[0]);
                startDate.setMinutes(startTime.split(":")[1]);
                startDate.setSeconds(startTime.split(":")[2]);

                endDate = new Date(currentDate.getTime());
                endDate.setHours(endTime.split(":")[0]);
                endDate.setMinutes(endTime.split(":")[1]);
                endDate.setSeconds(endTime.split(":")[2]);


                valid = startDate < currentDate && endDate > currentDate
                return valid;
            };

            if (check_time_valid("09:10:00", "11:30:00") && today(String($("#start").val()))) {
                if (check_time_valid("09:10:00", "09:45:00") && check1 == false) {
                    recess_time(1)
                    check1 = true;
                } else if (check_time_valid("09:45:00", "10:20:00") && check1 == false) {
                    recess_time(2)
                    check1 = true;
                } else if (check_time_valid("10:20:00", "10:55:00") && check1 == false) {
                    recess_time(3)
                    check1 = true;
                } else if (check_time_valid("10:55:00", "11:30:00") && check1 == false) {
                    recess_time(4)
                    check1 = true;
                }
            } else if (blink == true) {
                $('.icon-blink').each(function () {
                    $(this).remove();
                });
                $("#second_recess").insertAfter("#first_recess");
                $("#third_recess").insertAfter("#second_recess");
                $("#fourth_recess").insertAfter("#third_recess");
            }

            update_morning_duty();
            update_flag_duty();
            update_date();
            update_block_arrangement();
            update_recess_duty();

            var eT = 0;
            $.each(["#date", "#recess_duty_text", "#first_recess", "#second_recess", "#third_recess", "#fourth_recess", "#morning_duty_text", "#morning_duty_block"], function (i, v) {
                $(v).delay(eT).fadeIn('slow');
                eT += 200;
            });
        }

        var check1 = falsehu
    </script>
</body>

</html>
